<!doctype html>
<html lang="es">

<head>
    <title>Sistema de Gestión de Reuniones - Proyecto</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../assets/css/style.css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-black border borde-propio border-1 fixed-top"
            data-bs-theme="dark">
            <div class="container-fluid mx-3">
                <a class="navbar-brand me-auto fw-bold fs-2" href="../../index.html">Jeibi</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                    aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarContent">
                    <div class="navbar-nav ms-auto mb-lg-0 fs-5 fw-bold">
                        <a class="nav-link" href="../../index.html#sobre-mi">Sobre mi</a>
                        <a class="nav-link" href="../../index.html#habilidades">Habilidades</a>
                        <a class="nav-link" href="../../index.html#proyectos">Proyectos</a>
                        <a class="nav-link" href="../../index.html#contacto">Contacto</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero -->
        <section id="hero" class="hero-section">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 col-lg-10">
                        <div class="text-center mb-4">
                            <h1 class="hero-title mb-3">Sistema de Gestión de Reuniones</h1>
                            <p class="lead text-light mb-3">
                                Plataforma web fullstack para agendar y gestionar reuniones entre vendedores y clientes
                            </p>
                            <div class="d-flex flex-wrap justify-content-center gap-2 mb-4">
                                <span class="badge badge-tech">Node.js</span>
                                <span class="badge badge-tech">Express</span>
                                <span class="badge badge-tech">Sequelize</span>
                                <span class="badge badge-tech">PostgreSQL</span>
                                <span class="badge badge-tech">Handlebars</span>
                                <span class="badge badge-tech">JWT</span>
                            </div>
                        </div>

                        <!-- Imagen hero -->
                        <div class="proyecto-img-container mb-4">
                            <img src="../../assets/images/proyectos/proyecto1/hero.webp"
                                class="img-fluid rounded proyecto-hero-img" alt="Sistema de Reuniones">
                        </div>

                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center mb-3">
                            <a href="#arquitectura" class="btn btn-danger px-4 py-2">
                                <i class="bi bi-diagram-3 me-2"></i>Ver arquitectura
                            </a>
                            <a href="https://github.com/jitv-dev/meeting-system" target="_blank"
                                class="btn text-light border borde-propio boton-propio px-4 py-2">
                                <i class="bi bi-github me-2"></i>Código
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Qué es -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">¿Qué es?</h2>
                        <div class="proyecto-content">
                            <p class="text-light fs-5 mb-3">
                                Es una aplicación web completa que permite gestionar reuniones entre vendedores y
                                clientes.
                                El proyecto surgió como una forma de practicar el desarrollo fullstack, implementando un
                                sistema real con autenticación, roles de usuario y operaciones CRUD completas.
                            </p>
                            <p class="text-light">
                                Los vendedores pueden crear reuniones públicas (cualquier cliente puede inscribirse) o
                                privadas (asignan directamente un cliente). Los clientes exploran el catálogo, se
                                inscriben,
                                y llevan un historial. Todo con autenticación segura mediante JWT y cookies httpOnly.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Roles del sistema -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Roles del sistema</h2>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-person-check"></i></div>
                                    <h5 class="text-light">Cliente</h5>
                                    <p class="text-light mb-0">Explora catálogo, agenda reuniones y consulta su
                                        historial</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-briefcase"></i></div>
                                    <h5 class="text-light">Vendedor</h5>
                                    <p class="text-light mb-0">Crea reuniones públicas/privadas y gestiona sus citas</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-shield-check"></i></div>
                                    <h5 class="text-light">Administrador</h5>
                                    <p class="text-light mb-0">Vista completa del sistema y gestión total</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Características -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Características principales</h2>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-shield-lock"></i></div>
                                    <h5 class="text-light">Autenticación JWT</h5>
                                    <p class="text-light mb-0">Sistema seguro con tokens, cookies httpOnly y hash bcrypt
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-people"></i></div>
                                    <h5 class="text-light">Sistema de roles</h5>
                                    <p class="text-light mb-0">Cliente, Vendedor y Admin con permisos específicos</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-calendar-event"></i></div>
                                    <h5 class="text-light">Gestión de reuniones</h5>
                                    <p class="text-light mb-0">CRUD completo con estados y actualización automática</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-clock-history"></i></div>
                                    <h5 class="text-light">Sistema automatizado</h5>
                                    <p class="text-light mb-0">Actualiza estados según fecha/hora automáticamente</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-toggles"></i></div>
                                    <h5 class="text-light">Reuniones públicas/privadas</h5>
                                    <p class="text-light mb-0">Catálogo abierto o asignación directa de clientes</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card">
                                    <div class="feature-icon"><i class="bi bi-graph-up"></i></div>
                                    <h5 class="text-light">Dashboard con estadísticas</h5>
                                    <p class="text-light mb-0">Métricas personalizadas según el rol del usuario</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Arquitectura -->
        <section id="arquitectura" class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Arquitectura del proyecto</h2>

                        <div class="tech-content">
                            <h4 class="text-light mb-3">Stack tecnológico</h4>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Backend con Express y Sequelize</h5>
                                <p class="text-light mb-3">
                                    El servidor está construido con Express 5 y usa Sequelize como ORM para manejar
                                    PostgreSQL. Implementé un patrón MVC para mantener el código organizado: modelos,
                                    controladores y vistas separados.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// Estructura del proyecto
src/
├── config/      // Configuración de DB
├── models/      // Usuario, Reunion, UsuarioReunion
├── controllers/ // Lógica de negocio
├── routes/      // Definición de rutas
├── middlewares/ // Auth y validaciones
├── views/       // Templates Handlebars
└── utils/       // Funciones auxiliares</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Relaciones de base de datos</h5>
                                <p class="text-light mb-3">
                                    Implementé dos tipos de relaciones: 1:N entre Usuario y Reunion (un vendedor crea
                                    muchas reuniones) y N:M entre Usuario y Reunion a través de UsuarioReunion (muchos
                                    clientes pueden inscribirse en muchas reuniones).
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// Relación 1:N - Vendedor crea reuniones
Usuario.hasMany(Reunion, {
    foreignKey: 'vendedorId',
    as: 'reunionesImpartidas'
});

// Relación N:M - Clientes asisten a reuniones
Usuario.belongsToMany(Reunion, {
    through: UsuarioReunion,
    foreignKey: 'usuarioId',
    as: 'reunionesAsistidas'
});</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Autenticación y autorización</h5>
                                <p class="text-light mb-3">
                                    Uso JWT para la autenticación. Al hacer login, genero un token que guardo en una
                                    cookie httpOnly (más seguro que localStorage). Middleware personalizado verifica
                                    el token y los roles antes de permitir el acceso a rutas protegidas.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// Generar token al login
const token = jwt.sign(
    {
        id: usuario.id,
        nombre: usuario.nombre,
        rol: usuario.rol
    },
    process.env.JWT_SECRET,
    { expiresIn: '2h' }
);

res.cookie('token', token, {
    httpOnly: true,
    secure: false,
    maxAge: 2 * 60 * 60 * 1000
});</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Sistema de rutas con Express Router</h5>
                                <p class="text-light mb-3">
                                    Organicé las rutas en archivos separados. Las rutas especiales (como /new,
                                    /gestionar) van antes de las dinámicas (/:id) para evitar conflictos. Uso
                                    method-override para PUT y DELETE desde formularios HTML.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// reuniones.js
router.get('/new', reunionesController.new);
router.get('/mis-inscripciones', reunionesController.misInscripciones);
router.get('/gestionar', reunionesController.gestionar);

// Rutas CRUD básicas
router.get('/', reunionesController.index);
router.post('/', reunionesController.create);
router.get('/:id', reunionesController.show);
router.put('/:id', reunionesController.update);
router.delete('/:id', reunionesController.delete);</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Middleware de autorización</h5>
                                <p class="text-light mb-3">
                                    Los controladores usan arrays para encadenar middlewares. Primero verifica
                                    autenticación, luego el rol requerido, y finalmente ejecuta la lógica. Esto
                                    mantiene el código limpio y reutilizable.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// Ejemplo de controller con middlewares
exports.create = [
    requireAuth,              // Usuario autenticado
    requireRole('vendedor', 'admin'),  // Rol correcto
    async (req, res, next) => {
        // Lógica del controlador
        const { titulo, fecha, hora, clienteId } = req.body;
        
        const reunion = await Reunion.create({
            titulo,
            fecha,
            hora,
            vendedorId: req.auth.id
        });
        
        res.redirect('/reuniones/gestionar');
    }
];</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Consultas con includes y filtros</h5>
                                <p class="text-light mb-3">
                                    Para obtener datos relacionados, uso includes de Sequelize. Por ejemplo, para
                                    traer las reuniones de un cliente con la info del vendedor, o verificar si una
                                    reunión ya tiene un cliente inscrito con estado activo.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>// Obtener reuniones disponibles con vendedor
const reuniones = await Reunion.findAll({
    where: {
        estado: 'programada',
        fecha: { [Op.gte]: new Date() }
    },
    include: [{
        model: Usuario,
        as: 'vendedor',
        attributes: ['nombre', 'email']
    }],
    order: [['fecha', 'ASC']]
});

// Verificar si tiene cliente inscrito
const tieneCliente = await UsuarioReunion.findOne({
    where: {
        reunionId: id,
        estado: { [Op.in]: ['inscrito', 'confirmado'] }
    }
});</code></pre>
                                </div>
                            </div>

                            <div class="tech-item mb-4">
                                <h5 class="color-propio">Sistema de actualización automática</h5>
                                <p class="text-light mb-3">
                                    Creé una utilidad que actualiza automáticamente el estado de las reuniones según
                                    la fecha y hora actual. Se ejecuta antes de mostrar listados para mantener todo
                                    sincronizado. Evalúa múltiples condiciones para determinar el estado correcto.
                                </p>
                                <div class="code-snippet">
                                    <pre><code>async function actualizarReunionesVencidas() {
    const ahora = new Date();
    const reuniones = await Reunion.findAll({
        where: { estado: { [Op.in]: ['programada', 'en_curso'] } }
    });

    for (const reunion of reuniones) {
        const fechaInicio = new Date(`${reunion.fecha}T${reunion.hora}`);
        const fechaFin = new Date(fechaInicio.getTime() + reunion.duracion * 60000);
        
        const tieneCliente = await UsuarioReunion.findOne({
            where: {
                reunionId: reunion.id,
                estado: { [Op.in]: ['inscrito', 'confirmado'] }
            }
        });

        // Si ya finalizó
        if (ahora > fechaFin) {
            await reunion.update({ 
                estado: tieneCliente ? 'finalizada' : 'cancelada' 
            });
        }
        // Si está en curso
        else if (ahora >= fechaInicio && ahora <= fechaFin) {
            if (tieneCliente) {
                await reunion.update({ estado: 'en_curso' });
            }
        }
    }
}</code></pre>
                                </div>
                            </div>

                            <div class="tech-item">
                                <h5 class="color-propio">Handlebars helpers personalizados</h5>
                                <p class="text-light">
                                    Creé helpers para formatear fechas, capitalizar texto y comparar valores en las
                                    vistas. Esto mantiene la lógica fuera de los templates y hace el código más
                                    limpio y reutilizable.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Funcionalidades por rol -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Funcionalidades por rol</h2>

                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="demo-card">
                                    <div class="img-container">
                                        <img src="../../assets/images/proyectos/proyecto1/cliente.png"
                                            class="img-fluid rounded" alt="Vista cliente">
                                    </div>
                                    <h5 class="text-light">Cliente</h5>
                                    <p class="text-light">
                                        · Explorar catálogo de reuniones disponibles<br>
                                        · Inscribirse en reuniones públicas<br>
                                        · Ver reuniones agendadas<br>
                                        · Cancelar inscripciones<br>
                                        · Consultar historial completo
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="demo-card">
                                    <div class="img-container">
                                        <img src="../../assets/images/proyectos/proyecto1/vendedor.png"
                                            class="img-fluid rounded" alt="Vista vendedor">
                                    </div>
                                    <h5 class="text-light">Vendedor</h5>
                                    <p class="text-light">
                                        · Crear reuniones públicas o privadas<br>
                                        · Editar y eliminar sus reuniones<br>
                                        · Ver clientes inscritos<br>
                                        · Dashboard con estadísticas<br>
                                        · Gestionar próximas reuniones
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="demo-card">
                                    <div class="img-container">
                                        <img src="../../assets/images/proyectos/proyecto1/admin.png"
                                            class="img-fluid rounded" alt="Vista admin">
                                    </div>
                                    <h5 class="text-light">Administrador</h5>
                                    <p class="text-light">
                                        · Vista completa de todas las reuniones<br>
                                        · Editar cualquier reunión<br>
                                        · Estadísticas globales del sistema<br>
                                        · Gestión de usuarios<br>
                                        · Control total del sistema
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="demo-card">
                                    <div class="img-container">
                                        <img src="../../assets/images/proyectos/proyecto1/estados.png"
                                            class="img-fluid rounded" alt="Estados de reuniones">
                                    </div>
                                    <h5 class="text-light">Estados automáticos</h5>
                                    <p class="text-light">
                                        · Programada: Creada y pendiente<br>
                                        · En curso: Iniciada según fecha/hora<br>
                                        · Finalizada: Completada con cliente<br>
                                        · Cancelada: Sin cliente o eliminada
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Desafíos técnicos -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Desafíos técnicos resueltos</h2>

                        <div class="proyecto-content">
                            <div class="mb-4">
                                <h5 class="color-propio">Manejo de fechas y zonas horarias</h5>
                                <p class="text-light">
                                    Uno de los mayores desafíos fue manejar correctamente las fechas. PostgreSQL con
                                    DATEONLY y TIME puede ser complicado. Tuve que asegurarme de que las fechas se
                                    guardaran sin desfase horario y que las comparaciones funcionaran correctamente
                                    para el sistema de actualización automática.
                                </p>
                            </div>

                            <div class="mb-4">
                                <h5 class="color-propio">Consultas complejas con Sequelize</h5>
                                <p class="text-light">
                                    Implementar consultas que incluyan múltiples relaciones, filtros anidados y
                                    ordenamiento fue todo un reto. Especialmente para el dashboard donde necesitaba
                                    estadísticas específicas según el rol del usuario, con datos de múltiples tablas.
                                </p>
                            </div>

                            <div class="mb-4">
                                <h5 class="color-propio">Sistema de permisos granular</h5>
                                <p class="text-light">
                                    Crear middlewares que validen no solo si el usuario está autenticado, sino también
                                    si tiene el rol correcto Y si es el dueño del recurso (por ejemplo, un vendedor
                                    solo puede editar sus propias reuniones) requirió bastante lógica de validación.
                                </p>
                            </div>

                            <div>
                                <h5 class="color-propio">Lógica de estados automáticos</h5>
                                <p class="text-light">
                                    El sistema que actualiza automáticamente los estados de las reuniones tiene que
                                    considerar múltiples casos: si tiene cliente, si ya pasó la hora, si está en curso,
                                    si perdió al cliente durante la reunión, etc. Fue necesario probar muchos
                                    escenarios.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lo que aprendí -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section">
                        <h2 class="text-light mb-4">Lo que aprendí</h2>

                        <div class="learning-grid">
                            <div class="learning-item">
                                <i class="bi bi-diagram-3 color-propio"></i>
                                <h5 class="text-light">Arquitectura MVC</h5>
                                <p class="text-light">Organizar un proyecto grande con separación de responsabilidades
                                </p>
                            </div>

                            <div class="learning-item">
                                <i class="bi bi-database color-propio"></i>
                                <h5 class="text-light">ORM avanzado</h5>
                                <p class="text-light">Relaciones complejas, consultas anidadas y optimización con
                                    Sequelize</p>
                            </div>

                            <div class="learning-item">
                                <i class="bi bi-shield-check color-propio"></i>
                                <h5 class="text-light">Autenticación segura</h5>
                                <p class="text-light">JWT, cookies httpOnly, hash de contraseñas y middleware de
                                    permisos</p>
                            </div>

                            <div class="learning-item">
                                <i class="bi bi-gear-fill color-propio"></i>
                                <h5 class="text-light">Backend completo</h5>
                                <p class="text-light">API RESTful, validaciones, manejo de errores y lógica de negocio
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Volver -->
        <section class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="proyecto-section text-center">
                        <h3 class="text-light mb-4">¿Quieres ver más proyectos?</h3>
                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                            <a href="../../index.html#proyectos" class="btn btn-danger px-4 py-2">
                                <i class="bi bi-arrow-left me-2"></i>Ver más proyectos
                            </a>
                            <a href="../../index.html#contacto"
                                class="btn text-light border borde-propio boton-propio px-4 py-2">
                                <i class="bi bi-envelope me-2"></i>Hablemos
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="navbar navbar-dark bg-black border borde-propio border-2 mt-5" data-bs-theme="dark">
        <div class="container-fluid mx-3">
            <div class="navbar-brand me-auto fw-bold">
                <span>&copy; 2025 Portafolio Personal</span>
            </div>
            <div class="navbar-nav ms-auto flex-row gap-2">
                <span class="nav-text fw-bold d-none d-sm-inline align-self-center text-light">Contacto:</span>
                <a href="https://github.com/jitv-dev" class="nav-link text-white p-0" title="GitHub">
                    <i class="bi bi-github fs-5"></i>
                </a>
                <a href="https://www.linkedin.com/in/javier-torres-valenz/" class="nav-link text-white p-0"
                    title="LinkedIn">
                    <i class="bi bi-linkedin fs-5"></i>
                </a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>

</html>